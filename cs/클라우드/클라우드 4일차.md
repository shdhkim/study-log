# 클라우드와 온프레미스 환경의 원리 및 IP 구조 정리

## 1. 클라우드란 무엇인가

클라우드(Cloud)란 사용자가 직접 서버를 구입하거나 관리하지 않고,
인터넷을 통해 원격으로 가상화된 컴퓨터 자원(서버, 스토리지, 네트워크 등)을
빌려 쓰는 서비스이다.

즉, 물리 서버를 AWS나 Azure 같은 업체가 대신 관리해주고,
사용자는 가상의 서버(예: EC2)를 빌려 사용하는 방식이다.

### 클라우드의 기본 원리

1. 가상화(Virtualization)
   - 한 대의 물리 서버를 여러 개의 가상 서버(인스턴스)로 나누어 사용
   - 하이퍼바이저(Hypervisor)가 CPU, 메모리, 스토리지를 가상으로 분배

2. 자원 관리(Resource Pooling)
   - 여러 사용자의 서버가 하나의 자원 풀에서 동적으로 할당됨
   - 사용자가 인스턴스를 생성하면 자동으로 가상 자원이 배정됨

3. 유연한 확장성(Scalability)
   - 필요할 때 서버를 늘리고(Scale-out) 줄일 수 있음

4. 온디맨드(On-demand)
   - 실제 물리 장비 없이도 몇 초 만에 서버 생성 가능

---

## 2. 온프레미스(On-Premise)란 무엇인가

온프레미스란 클라우드 환경이 아닌, **직접 서버를 구축하고 운영하는 환경**을 말한다.
즉, 회사나 개인이 직접 보유한 물리적 컴퓨터(서버)를 사용하여
시스템을 설치, 관리, 운영하는 방식이다.

### 온프레미스 환경의 특징

| 항목 | 설명 |
|------|------|
| 서버 위치 | 직접 보유한 서버실, IDC, 연구소 등 |
| 관리 주체 | 사용자(기업)가 직접 관리 |
| 장점 | 높은 보안, 내부망 통제 용이, 인터넷 연결 없이 운영 가능 |
| 단점 | 초기 구축 비용 높음, 확장성 낮음, 유지보수 인력 필요 |
| 예시 | 사내 ERP, MES, PLM, 내부 관리 시스템 등 |

### 온프레미스 서버 구성 예시

```
[사용자 PC]
   ↓
[사내 네트워크]
   ↓
[온프레미스 서버]
   ├─ IP: 192.168.0.10
   ├─ Nginx (80/443 포트)
   ├─ Spring Boot (8080 포트)
   └─ DB 서버 (3306 포트)
```

- 내부망에서만 접근 가능하며,
- 필요 시 라우터 또는 방화벽을 통해 외부 접근을 열 수도 있다.

---

## 3. 클라우드와 온프레미스 비교

| 구분 | 클라우드 | 온프레미스 |
|------|-----------|-------------|
| 서버 위치 | 원격 데이터센터 (AWS, GCP 등) | 자체 서버실, IDC, 연구소 등 |
| 서버 관리 | 클라우드 제공업체가 관리 | 직접 하드웨어, OS, 네트워크 관리 |
| 비용 구조 | 사용량 기반 과금 (OPEX) | 초기 장비 구입비 (CAPEX) |
| 확장성 | 매우 유연 (자동 확장 가능) | 물리적 한계 존재 |
| IP 관리 | 자동(VPC 내부에서 관리) | 직접 고정 IP 설정 |
| 접근 방식 | 공인 IP, NAT, 로드밸런서 | 내부망, 포트포워딩, DMZ 등 |
| 보안 | 클라우드 보안 그룹으로 제어 | 방화벽, VLAN, ACL 직접 설정 |

---

## 4. 클라우드에서의 IP 구조

클라우드 서비스(AWS EC2, GCP VM 등)는 가상 네트워크(VPC: Virtual Private Cloud)를 만들어
그 안에서 IP를 관리한다.

### IP 종류

| 구분 | 설명 | 예시 |
|------|------|------|
| 사설 IP (Private IP) | 내부 통신용. 인터넷에서는 보이지 않음 | 10.x.x.x, 172.16.x.x, 192.168.x.x |
| 공인 IP (Public IP) | 외부에서 접근 가능한 IP | 3.39.22.15, 203.0.113.25 |
| Elastic IP (EIP) | 고정 공인 IP | 재시작해도 변경되지 않음 |
| NAT Gateway IP | 사설망에서 외부 인터넷으로 나갈 때 사용 | 중간 게이트웨이 역할 |

---

## 5. 사설 IP란 무엇인가

사설 IP(Private IP)는 내부 네트워크(회사, 가정, 학교 등)에서만 사용하는 IP 주소로,
인터넷에서는 직접 접근할 수 없다.

예를 들어 회사 내부 서버 간 통신, 혹은 공유기 안의 PC, 스마트폰 간 통신에서 사용된다.

### 사설 IP 대역 (RFC1918 기준)

| 대역 | 용도 |
|------|------|
| 10.0.0.0 ~ 10.255.255.255 | 대규모 네트워크용 |
| 172.16.0.0 ~ 172.31.255.255 | 중규모 네트워크용 |
| 192.168.0.0 ~ 192.168.255.255 | 가정/소규모 네트워크용 |

---

## 6. 사설 IP와 공인 IP의 관계

인터넷에서 직접 통신 가능한 주소는 공인 IP뿐이다.
따라서 사설망에 있는 서버가 외부 인터넷으로 접속하려면
NAT(Network Address Translation) 기술을 이용해야 한다.

### NAT 구조 예시

```
[내부 사설망]
192.168.0.10 → Nginx 서버
192.168.0.11 → DB 서버
        ↓
[라우터/NAT]
공인 IP: 203.0.113.25
        ↓
[인터넷 사용자]
```

외부에서는 203.0.113.25로 접속하지만,
실제 내부 서버는 192.168.0.10에서 동작한다.
NAT가 이 주소를 자동 변환해준다.

---

## 7. AWS EC2의 IP 구조 예시

| IP 종류 | 할당 위치 | 설명 |
|----------|-------------|------|
| Private IP | VPC/Subnet 내부 | EC2 간 내부 통신용 |
| Public IP | 자동 또는 수동 할당 | 외부 접근용 (재시작 시 변경 가능) |
| Elastic IP | 사용자가 고정으로 할당 | 고정 공인 IP (배포용으로 자주 사용) |

### 구조 예시

```
[사용자]
   ↓ (https://myservice.com)
[CloudFront / ALB]
   ↓
[EC2 서버]
   ├─ Public IP: 3.39.22.15
   └─ Private IP: 10.0.1.25
```

---

## 8. 온프레미스 서버의 IP 구조 예시

| IP 구분 | 설명 | 예시 |
|----------|------|------|
| 내부 사설 IP | 내부망 통신용, 고정 IP 설정 | 192.168.0.10 |
| 공인 IP | 외부 접근용, ISP로부터 할당 | 203.0.113.25 |
| 포트포워딩 | 라우터에서 공인 → 사설 IP 매핑 | 203.0.113.25:80 → 192.168.0.10:80 |

### 구성 예시

```
[외부 사용자]
   ↓ (https://myserver.com)
[공인 IP: 203.0.113.25]
   ↓ (라우터 포트포워딩)
[온프레미스 서버: 192.168.0.10]
   ├─ Nginx
   ├─ Spring Boot
   └─ DB
```

---

## 9. 정리 요약

| 구분 | 클라우드 | 온프레미스 |
|------|-----------|-------------|
| 관리 주체 | 클라우드 제공업체 | 사용자 직접 관리 |
| 서버 위치 | 원격 데이터센터 | 물리 서버(회사/연구소) |
| IP 구조 | 사설 + 공인 IP (VPC 내 자동 관리) | 수동 설정, 포트포워딩 필요 |
| 확장성 | 매우 높음 | 물리적 한계 |
| 보안 | 제공업체 보안 그룹 | 방화벽, VLAN 직접 관리 |
| 비용 | 사용량 기반 | 초기 장비 비용 발생 |

---

## 10. 핵심 요약

클라우드는 가상화된 서버 환경이며, 모든 서버는 VPC 내부의 사설 IP를 기본으로 가진다.
외부 접근 시 공인 IP 또는 NAT를 통해 연결된다.

온프레미스는 사용자가 직접 서버를 구축하여 운영하는 환경으로,
기본적으로 사설 IP 하나만으로도 내부 배포가 가능하며,
외부 접근을 위해서는 공인 IP 또는 포트포워딩 설정이 필요하다.
