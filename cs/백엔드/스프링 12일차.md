# Spring Boot 로그 정리 (Runtime / Code Execution / Logback / SLF4J)

본 문서는 지금까지 정리한 **Spring Boot 로그 개념**을 하나로 묶은 정리본이다.
실무 기준, 장애 대응 기준을 모두 포함한다.

---

## 1. 로그의 분류

Spring Boot 기준 로그는 다음 두 개념으로 구분된다.

### 1.1 런타임 로그 (Runtime Log)

* JVM 실행 이후부터 종료까지 발생하는 모든 로그
* Spring Boot 서버 기동 로그 포함
* 프레임워크, WAS, 라이브러리 로그 포함

포함 예시:

* 서버 시작 로그
* Bean 생성 / DI 로그
* 요청 처리 로그
* SQL 로그
* 예외 스택트레이스

---

### 1.2 코드 실행 로그 (Code Execution Log)

* 개발자가 직접 코드에서 찍는 로그
* `log.info()`, `log.debug()` 등

```java
log.info("주문 시작");
log.debug("검증 단계 진입");
```

* 항상 런타임 로그의 부분집합

관계:

```
런타임 로그 ⊃ 코드 실행 로그
```

---

## 2. 로그 처리 구조 (중요)

Spring Boot 로그는 다음 구조로 동작한다.

```
[코드 / 프레임워크]
        ↓
      SLF4J (인터페이스)
        ↓
     Logback (구현체)
        ↓
콘솔 / 파일 / 로그 서버
```

* SLF4J: 표준 인터페이스
* Logback: 실제 로그 출력 엔진

런타임 로그와 코드 실행 로그는 **완전히 동일한 파이프라인**을 사용한다.

---

## 3. Logback이란?

### 3.1 정의

* Logback은 **로그를 실제로 출력하고 관리하는 구현체**
* Spring Boot 기본 로그 엔진

### 3.2 Logback이 하는 일

* 로그 레벨 판단
* 출력 위치 결정 (콘솔, 파일)
* 로그 포맷 결정
* 로그 롤링 정책
* 환경(dev/prod) 분기

### 3.3 설정 파일 위치

```
src/main/resources/logback-spring.xml
```

* `logback.xml`이 아닌 `logback-spring.xml` 사용 권장
* Spring Profile, application.yml 변수 사용 가능

---

## 4. System.out.println을 쓰면 안 되는 이유

### 4.1 문제점

| 항목    | System.out.println | Logback |
| ----- | ------------------ | ------- |
| 로그 레벨 | 없음                 | 있음      |
| 출력 제어 | 불가                 | 가능      |
| 파일 저장 | 불가                 | 가능      |
| 비동기   | 불가                 | 가능      |
| 운영 관리 | 불가                 | 가능      |

### 4.2 결론

* 운영 코드에서 `System.out.println` 사용 금지
* 로컬 디버깅에서만 임시 사용 후 제거

---

## 5. 로그 레벨 전체 설명

로그 레벨은 아래로 갈수록 중요도가 높다.

```
TRACE
DEBUG
INFO
WARN
ERROR
```

### 5.1 TRACE

* 매우 상세한 내부 흐름
* 거의 사용하지 않음

### 5.2 DEBUG

* 개발 중 내부 상태 확인
* 운영에서는 기본 비활성

### 5.3 INFO

* 정상 흐름의 핵심 이벤트
* 운영 기본 로그

### 5.4 WARN

* 당장은 문제 없지만 위험 신호

### 5.5 ERROR

* 실패 / 장애 상황
* 반드시 예외와 함께 기록

---

## 6. 로그 레벨 출력 규칙

설정된 레벨 이상만 출력된다.

| 설정 레벨 | 출력 로그                    |
| ----- | ------------------------ |
| INFO  | INFO, WARN, ERROR        |
| DEBUG | DEBUG, INFO, WARN, ERROR |
| WARN  | WARN, ERROR              |

---

## 7. root 로그 레벨 개념

### 7.1 root란?

* 모든 로그의 **최종 기본값**
* 패키지별 설정이 없으면 root를 따른다

### 7.2 root 미설정 시

* Spring Boot 기본값: `INFO`
* root는 **항상 존재**한다

---

## 8. 패키지별 로그 설정 원리

### 8.1 패키지 계층 규칙

* 패키지는 점(`.`) 기준 계층 구조
* 상위 패키지 설정은 하위에 상속
* 더 구체적인 설정이 우선 적용

### 8.2 예시

```yaml
logging:
  level:
    root: INFO
    com.skala03.skala_backend: DEBUG
    com.skala03.skala_backend.repository: WARN
```

적용 결과:

| 패키지                                  | 적용 레벨 |
| ------------------------------------ | ----- |
| com.skala03.skala_backend.service    | DEBUG |
| com.skala03.skala_backend.repository | WARN  |
| 기타                                   | INFO  |

---

## 9. 패키지 이름 불일치 문제

### 9.1 문제 상황

```yaml
logging:
  level:
    com.skala.backend: INFO
```

```java
package com.skala03.skala_backend.client;
```

* 패키지 문자열이 다르면 설정 적용 안 됨
* 이 경우 root 로그 레벨을 따름

### 9.2 해결 방법

* 실제 package 선언과 **100% 동일하게 설정**

```yaml
logging:
  level:
    com.skala03.skala_backend: INFO
```

---

## 10. 서버 실행 로그는 무엇인가?

### 10.1 정의

* Spring Boot 서버 실행 직후 출력되는 로그
* 런타임 로그의 일부

### 10.2 예시

```text
Starting Application
Tomcat started on port(s): 8080
Started Application in 3.2 seconds
```

### 10.3 주요 패키지

| 영역        | 패키지                 |
| --------- | ------------------- |
| Spring    | org.springframework |
| Tomcat    | org.apache.catalina |
| Hibernate | org.hibernate       |
| HikariCP  | com.zaxxer.hikari   |

---

## 11. org.springframework: INFO 의미

```yaml
logging:
  level:
    org.springframework: INFO
```

* Spring Framework 런타임 로그를 INFO 이상만 출력
* 서버 실행 로그의 핵심 부분 포함
* Tomcat, Hibernate 로그는 포함하지 않음

---

## 12. 설정되지 않은 로그는 어떻게 되나?

* 가장 가까운 패키지 설정을 찾음
* 없으면 root 로그 레벨 적용

결론:

```
설정 안 된 로그 → root
```

---

## 13. 실무 권장 로그 설정 템플릿

```yaml
logging:
  level:
    root: INFO
    org.springframework: INFO
    org.hibernate: WARN
    com.skala03.skala_backend: DEBUG   # dev
```

운영 환경에서는:

```yaml
logging:
  level:
    root: INFO
    com.skala03.skala_backend: INFO
```

---

## 14. 핵심 한 줄 요약

* 런타임 로그와 코드 실행 로그는 동일한 Logback + SLF4J 구조를 사용한다
* 코드 실행 로그를 설정하지 않으면 root 로그 레벨을 따른다
* 패키지 로그 설정은 package 선언과 정확히 일치해야 한다
* root 로그 레벨의 기본값은 INFO다
* System.out.println은 운영 코드에서 사용하지 않는다

---


