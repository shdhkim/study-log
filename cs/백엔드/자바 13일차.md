# Java Map / HashMap / TreeMap 정리 (Set 연계)

---

## 1) Map의 본질

### 1.1 Map의 핵심 개념

* **Key → Value 쌍**
* **Key는 중복 불가**
* Value는 중복 가능
* Key의 중복 판단 기준: `equals()` + `hashCode()`

```java
Map<String, Integer> map = new HashMap<>();
map.put("A", 1);
map.put("A", 2);

System.out.println(map.size());      // 1
System.out.println(map.get("A"));    // 2
```

---

### 1.2 Map은 Collection이 아니다

```java
Map<K, V>   // Collection 아님
Set<K>
List<E>
```

* Map은 **독립 계층**
* 대신 **Set과 강하게 연결됨**

---

## 2) Map과 Set의 관계 (핵심)

### 2.1 Key는 사실상 Set이다

```java
Set<K> keySet = map.keySet();
```

* `keySet()`은 **Set 반환**
* Key는 중복 불가 → Set 성질과 동일

```java
for (String key : map.keySet()) {
    System.out.println(key);
}
```

---

### 2.2 entrySet()도 Set이다

```java
Set<Map.Entry<String, Integer>> entries = map.entrySet();
```

```java
for (Map.Entry<String, Integer> e : map.entrySet()) {
    System.out.println(e.getKey() + " : " + e.getValue());
}
```

* Entry 자체가 Set 원소
* Key 중복 불가 구조

---

### 2.3 value는 Set이 아니다

```java
Collection<V> values = map.values();
```

* 중복 가능
* Collection 반환 (List도 Set도 아님)

---

## 3) HashMap

### 3.1 특징

* 순서 보장 ❌
* 평균 시간복잡도: O(1)
* 가장 많이 쓰는 Map

```java
Map<String, Integer> map = new HashMap<>();
map.put("C", 3);
map.put("A", 1);
map.put("B", 2);

System.out.println(map); // 순서 랜덤
```

---

### 3.2 내부 구조 요약

* Hash Table + Bucket
* 해시 충돌 시

  * Java 8+: LinkedList → Tree 구조로 전환

---

### 3.3 Key 설계 주의점

```java
class User {
    String name;
    int age;
}
```

* `equals()` / `hashCode()` 미구현 시

  * 동일 논리 Key라도 다른 Key로 인식
* **Map Key는 불변 객체 권장**

---

## 4) LinkedHashMap (참고)

### 4.1 특징

* 입력 순서 유지
* HashMap + LinkedList

```java
Map<String, Integer> map = new LinkedHashMap<>();
map.put("C", 3);
map.put("A", 1);
map.put("B", 2);

System.out.println(map); // C, A, B
```

---

## 5) TreeMap

### 5.1 특징

* **Key 정렬**
* 내부 구조: Red-Black Tree
* 시간복잡도: O(log N)

```java
Map<Integer, String> map = new TreeMap<>();
map.put(3, "C");
map.put(1, "A");
map.put(2, "B");

System.out.println(map); // 1, 2, 3
```

---

### 5.2 Comparator 사용

```java
Map<String, Integer> map =
    new TreeMap<>(Comparator.reverseOrder());
```

---

### 5.3 TreeMap 전용 기능 (NavigableMap)

```java
map.firstKey();
map.lastKey();
map.lowerKey(3);
map.higherKey(3);
```

---

## 6) Map vs Set vs List 비교

| 컬렉션  | 중복    | 접근 방식    | 목적          |
| ---- | ----- | -------- | ----------- |
| List | O     | index    | 순서/위치       |
| Set  | X     | contains | 존재 여부       |
| Map  | Key X | get(key) | Key → Value |

---

## 7) Set 관점에서 Map 이해하기

* `HashSet<E>` 내부는 사실상
  **`HashMap<E, Object>`**
* value는 더미 객체

```java
HashSet<String> set = new HashSet<>();
```

= 내부적으로

```java
HashMap<String, Object>
```

---

## 8) 언제 뭘 써야 하나?

| 상황        | 선택                   |
| --------- | -------------------- |
| 중복 제거     | Set                  |
| Key 기반 조회 | Map                  |
| 순서 중요     | List / LinkedHashMap |
| 정렬 필요     | TreeSet / TreeMap    |
| 성능 최우선    | HashMap              |

---

## 9) 실무/면접 핵심 포인트

* Map의 Key는 Set이다
* get()은 Map에만 있다
* Set에는 index / get() 없다
* TreeMap은 정렬 + 탐색용
* Key 객체는 반드시 불변 설계

---

## 10) 한 줄 요약

* **Set** = 중복 제거
* **Map** = Key → Value
* **HashMap** = 빠름
* **TreeMap** = 정렬
* **Key 설계가 Map 성능과 정확성을 결정**
