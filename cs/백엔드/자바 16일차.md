# Java 람다식에서 파라미터 타입 명시 정리

## 1. 람다식 기본 형태

자바 람다식의 기본 문법은 다음과 같다.

```java
(파라미터) -> 실행식
```

람다식은 함수형 인터페이스의 추상 메서드 구현체로 해석된다.

---

## 2. 파라미터 타입은 원래 생략한다

일반적으로 람다식에서는 파라미터 타입을 생략한다.

```java
Function<User, Integer> f = u -> u.getAge();
```

이유:
- 좌변의 타입(Function<User, Integer>)을 통해
- 컴파일러가 파라미터 타입을 추론할 수 있기 때문

이를 타겟 타입(Target Type) 기반 타입 추론이라고 한다.

---

## 3. 파라미터 타입을 명시해도 된다

람다식에 파라미터 타입을 직접 명시하는 것도 문법적으로 허용된다.

```java
Function<User, Integer> f =
    (User u) -> u.getAge();
```

컴파일러 해석:

```java
Integer apply(User u) {
    return u.getAge();
}
```

동작과 성능은 타입 생략 버전과 완전히 동일하다.

---

## 4. 타입 명시와 타입 생략은 혼용 불가

람다식 파라미터는 다음 규칙을 반드시 지켜야 한다.

```java
(User u, User v) -> u.getAge() + v.getAge()   // 가능
(u, v) -> u.getAge() + v.getAge()             // 가능
(User u, v) -> u.getAge() + v.getAge()        // 불가능
```

즉,
- 전부 타입 명시하거나
- 전부 타입 생략해야 한다

섞어서 쓰는 것은 허용되지 않는다.

---

## 5. 타입 명시가 필요한 경우 ① 타입 추론 실패

컴파일러가 파라미터 타입을 추론할 수 없는 경우에는
타입을 명시해야 한다.

```java
doSomething(x -> x.process());        // 컴파일 에러
doSomething((User x) -> x.process()); // 정상
```

---

## 6. 타입 명시가 필요한 경우 ② 오버로딩 메서드

람다를 받는 메서드가 오버로딩된 경우,
타입 추론이 모호해질 수 있다.

```java
void handle(Function<User, Integer> f);
void handle(Function<Order, Integer> f);

handle(x -> x.getId());        // 컴파일 에러
handle((User x) -> x.getId()); // 정상
```

---

## 7. 타입 명시가 필요한 경우 ③ 애노테이션 사용

람다 파라미터에 애노테이션을 붙이려면
타입을 반드시 명시해야 한다.

```java
(@NotNull User u) -> u.getAge();
```

타입 생략 람다에는 애노테이션을 붙일 수 없다.

---

## 8. var를 사용한 람다 (Java 11+)

Java 11부터는 var를 사용할 수 있다.

```java
(var u) -> u.getAge();
```

주의사항:
- var를 쓰면 모든 파라미터에 var를 써야 한다
- var와 타입/생략 혼용은 불가능하다

```java
(var u, var v) -> u.getAge() + v.getAge(); // 가능
(var u, v) -> ...                          // 불가능
```

---

## 9. 타입 명시 vs 생략 vs 메서드 참조

```java
Function<User, Integer> f1 = u -> u.getAge();
Function<User, Integer> f2 = (User u) -> u.getAge();
Function<User, Integer> f3 = User::getAge;
```

세 방식은 의미와 동작이 모두 동일하다.

---

## 10. 핵심 요약

- 람다식 파라미터 타입은 기본적으로 생략
- 컴파일러가 타겟 타입을 통해 자동 추론
- 타입 추론 실패 또는 애노테이션 필요 시 명시
- 파라미터 타입은 전부 명시 또는 전부 생략
- 동작과 성능 차이는 없음
