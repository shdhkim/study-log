
# 콜스택(Call Stack)과 pop 동작 완전 정리

## 1. 콜스택(Call Stack)이란?
콜스택은 자바스크립트 엔진이 **현재 어떤 함수가 실행 중인지 관리하는 스택(LIFO)** 구조이다.
- 함수 호출 시: push  
- 함수 종료 시: pop  

---

## 2. 콜스택 push/pop 기본 규칙
### push
함수를 호출하면 콜스택의 맨 위에 쌓인다.

### pop
함수가 **return되거나 실행이 끝나면** 스택에서 제거된다.

스택 규칙(LIFO):
```
push → push → push → pop → pop → pop
```

---

## 3. 콜스택 동작 상세 예제

### 예제 코드
```javascript
function a() {
  console.log("a 실행");
}

function b() {
  console.log("b 실행");
  a();
  console.log("b 끝");
}

b();
```

### 실행 중 콜스택 변화

| 단계 | 실행 내용 | 콜스택 상태 |
|------|-----------|--------------|
| 1 | b() 호출 | [b] |
| 2 | console.log("b 실행") | [b, console] |
| 3 | console 종료(pop) | [b] |
| 4 | a() 호출 | [b, a] |
| 5 | console.log("a 실행") | [b, a, console] |
| 6 | console 종료(pop) | [b, a] |
| 7 | a() 종료(pop) | [b] |
| 8 | console.log("b 끝") | [b, console] |
| 9 | console 종료(pop) | [b] |
| 10 | b() 종료(pop) | [] |

---

## 4. pop이 중요한 이유

### pop이 있어야 다음 코드가 실행 가능
a()가 pop되어야 b()가 다음 줄을 실행할 수 있다.

### pop이 없으면 스택 오버플로우
```javascript
function x() {
  x();
}
x();
```

---

## 5. 비동기에서 pop의 역할

비동기 작업(setTimeout, fetch 등)의 콜백은 **콜스택이 완전히 비었을 때만** 실행된다.

### 예제
```javascript
console.log("start");

setTimeout(() => {
  console.log("timeout");
}, 0);

console.log("end");
```

---

## 6. 이벤트 루프 구조(텍스트 버전)
```
[콜스택] ← push/pop
    ↑
    │ (콜스택이 비면 콜백 이동)
[이벤트 루프]
    ↑
    │ (Web API가 작업 완료 후 콜백 전달)
[태스크 큐]
    ↑
[Web API]
```

---

## 7. pop이 없으면 비동기 콜백이 실행되지 않는 예
```javascript
setTimeout(() => console.log("hi"), 0);

while (true) {}
```

---

## 8. 전체 요약
- 콜스택 pop = 함수 실행 종료 시 스택에서 제거  
- push/pop으로 함수 실행 순서 관리  
- pop이 있어야 비동기 콜백 실행 가능  
