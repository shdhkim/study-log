# React + JavaScript ë¹„ë™ê¸° Â· ì´ë²¤íŠ¸ ë£¨í”„ Â· ë°°ì¹­ ì™„ì „ ì •ë¦¬ (ìƒì„¸ ì˜ˆì‹œ)

ì´ ë¬¸ì„œëŠ” **React 18 + ë¸Œë¼ìš°ì € JavaScript ê¸°ì¤€**ìœ¼ë¡œ ì‘ì„±ë¨

- ì½œìŠ¤íƒ / ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ / ë§¤í¬ë¡œíƒœìŠ¤í¬
- ì´ë²¤íŠ¸ ë£¨í”„ ì‹¤í–‰ ìˆœì„œ
- React ë°°ì¹­(Batching)
- ë Œë”ë§ íƒ€ì´ë°
- ì—…ë°ì´íŠ¸ í(update queue)
- setState ê°’ ë°©ì‹ vs í•¨ìˆ˜í˜• ë°©ì‹
- ì™œ ë Œë”ë§ì´ 1ë²ˆ ë˜ëŠ” 2ë²ˆ ë˜ëŠ”ì§€

---

## 1. JavaScript ì‹¤í–‰ êµ¬ì¡° (3ëŒ€ ìš”ì†Œ)

### 1-1. ì½œìŠ¤íƒ(Call Stack)
- **ì§€ê¸ˆ ì‹¤í–‰ ì¤‘ì¸ í•¨ìˆ˜ë“¤ì´ ìŒ“ì´ëŠ” ê³³**
- ë™ê¸° ì½”ë“œê°€ ì‹¤í–‰ë¨
- ì½œìŠ¤íƒì´ ë¹„ê¸° ì „ì—ëŠ” ì•„ë¬´ ê²ƒë„ ë¼ì–´ë“¤ ìˆ˜ ì—†ìŒ

```js
function a() {
  console.log("a");
}
function b() {
  console.log("b");
}

a();
b();
```

ì‹¤í–‰ ìˆœì„œ:
```
ì½œìŠ¤íƒ: a â†’ b â†’ ì¢…ë£Œ
```

---

### 1-2. ë§ˆì´í¬ë¡œíƒœìŠ¤í¬(Microtask Queue)
- ì½œìŠ¤íƒì´ **ë¹„ëŠ” ì¦‰ì‹œ** ì‹¤í–‰
- ê°™ì€ ì´ë²¤íŠ¸ ë£¨í”„ í„´
- Promise.then / async-await

```js
console.log("A");

Promise.resolve().then(() => {
  console.log("B");
});

console.log("C");
```

ì¶œë ¥:
```
A
C
B
```

---

### 1-3. ë§¤í¬ë¡œíƒœìŠ¤í¬(Macrotask Queue)
- **ë‹¤ìŒ ì´ë²¤íŠ¸ ë£¨í”„ í„´**
- setTimeout, DOM ì´ë²¤íŠ¸

```js
console.log("A");

setTimeout(() => {
  console.log("B");
}, 0);

console.log("C");
```

ì¶œë ¥:
```
A
C
B
```

---

## 2. ì´ë²¤íŠ¸ ë£¨í”„ ì „ì²´ ìˆœì„œ (ë¸Œë¼ìš°ì €)

```
1. ì½œìŠ¤íƒ ì‹¤í–‰
2. ì½œìŠ¤íƒ ë¹„ë©´ â†’ ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ ì „ë¶€ ì‹¤í–‰
3. React ë Œë”ë§ ê°€ëŠ¥ ì§€ì 
4. ë¸Œë¼ìš°ì € paint
5. ë§¤í¬ë¡œíƒœìŠ¤í¬ 1ê°œ ì‹¤í–‰
6. ë‹¤ì‹œ 1ë²ˆ
```

ğŸ‘‰ **ë Œë”ë§ì€ â€œì½œìŠ¤íƒ + ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ê°€ ëª¨ë‘ ëë‚œ ë’¤â€**

---

## 3. React ë Œë”ë§ì˜ ì •ì²´

### í•µì‹¬ ì •ì˜
> **React ë Œë”ë§ = ì»´í¬ë„ŒíŠ¸ í•¨ìˆ˜ ì¬ì‹¤í–‰**

```jsx
function App() {
  console.log("render");
  return <div />;
}
```

- ë Œë”ë§ ë°œìƒ â†’ console.log ë‹¤ì‹œ ì‹¤í–‰
- setState í˜¸ì¶œ â‰  ì¦‰ì‹œ ë Œë”ë§

---

## 4. React ë°°ì¹­(Batching)ì´ë€?

### ì •ì˜
> **ê°™ì€ ì´ë²¤íŠ¸ ë£¨í”„ í„´ì—ì„œ ë°œìƒí•œ ì—¬ëŸ¬ ìƒíƒœ ì—…ë°ì´íŠ¸ë¥¼  
> Reactê°€ ëª¨ì•„ì„œ ë Œë”ë§ 1ë²ˆë§Œ í•˜ëŠ” ìµœì í™”**

---

## 5. ë°°ì¹­ë˜ëŠ” ëŒ€í‘œ ì˜ˆì œ (ë Œë” 1ë²ˆ)

```jsx
const onClick = () => {
  setCount(1);
  setCount(2);
  setCount(3);
};
```

ë‚´ë¶€ íë¦„:
```
ì½œìŠ¤íƒ: onClick ì‹¤í–‰
ì—…ë°ì´íŠ¸ í: 1, 2, 3 ì €ì¥
ì½œìŠ¤íƒ ì¢…ë£Œ
ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ ì—†ìŒ
â†’ ë Œë”ë§ 1ë²ˆ (count = 3)
```

---

## 6. ì´ë²¤íŠ¸ + ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ë„ ë°°ì¹­

```jsx
const onClick = () => {
  setCount(1);

  Promise.resolve().then(() => {
    setCount(2);
    setCount(3);
  });
};
```

- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ + Promise.then
- ê°™ì€ í„´
- **ë Œë” 1ë²ˆ (count = 3)**

---

## 7. ë°°ì¹­ì´ ê¹¨ì§€ëŠ” ê²½ìš° (ë Œë” 2ë²ˆ)

### setTimeout â†’ ë‹¤ìŒ í„´

```jsx
const onClick = () => {
  setCount(1);

  setTimeout(() => {
    setCount(2);
  }, 0);
};
```

íë¦„:
```
í„´ 1: setCount(1) â†’ ë Œë” (1)
í„´ 2: setCount(2) â†’ ë Œë” (2)
```

---

## 8. React ì—…ë°ì´íŠ¸ í(Update Queue)

### ê°’ìœ¼ë¡œ setState

```jsx
setCount(1);
setCount(2);
setCount(3);
```

ë‚´ë¶€ í:
```
replace 1
replace 2
replace 3
```

â†’ ë§ˆì§€ë§‰ ê°’ë§Œ ì ìš©

---

### í•¨ìˆ˜í˜• setState

```jsx
setCount(c => c + 1);
setCount(c => c + 1);
setCount(c => c + 1);
```

ë‚´ë¶€ í:
```
fn(prev => prev + 1)
fn(prev => prev + 1)
fn(prev => prev + 1)
```

ì²˜ë¦¬:
```
0 â†’ 1 â†’ 2 â†’ 3
```

---

## 9. ì™œ `count + 1` ê³¼ `c => c + 1` ì´ ë‹¤ë¥¸ê°€?

### ë Œë” ìŠ¤ëƒ…ìƒ· ê°œë…

```jsx
function App() {
  const [count, setCount] = useState(0);
  // ì´ ë Œë” ë™ì•ˆ countëŠ” í•­ìƒ 0
}
```

```jsx
setCount(count + 1);
setCount(count + 1);
```
â†’ ë‘˜ ë‹¤ `0 + 1`

```jsx
setCount(c => c + 1);
setCount(c => c + 1);
```
â†’ ì‹¤ì œ ìµœì‹  ê°’ ê¸°ì¤€

---

## 10. í•¨ìˆ˜ ì •ì˜ vs í•¨ìˆ˜ ì‹¤í–‰

```jsx
function App() {
  function handler() {
    console.log("click");
  }

  console.log("render");
  return <button onClick={handler}>Click</button>;
}
```

- render ì‹œ: handlerëŠ” **ì •ì˜ë§Œ**
- í´ë¦­ ì‹œ: handler ì‹¤í–‰

---

## 11. ì™œ ë Œë”ë§ì´ 2ë²ˆ ë˜ëŠ”ê°€?

> **ë°°ì¹­ êµ¬ê°„ì´ 2ë²ˆì´ê¸° ë•Œë¬¸**

- ì´ë²¤íŠ¸ í„´ 1ë²ˆ
- setTimeout í„´ 1ë²ˆ

```
ë Œë”ë§ íšŸìˆ˜ = ë°°ì¹­ ì¢…ë£Œ íšŸìˆ˜
```

---

## 12. í•µì‹¬ ê³µì‹ ëª¨ìŒ

### ë Œë”ë§ ì‹œì 
```
ì½œìŠ¤íƒ ì¢…ë£Œ
+ ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ ì¢…ë£Œ
= ë Œë”ë§ ê°€ëŠ¥
```

### ë°°ì¹­ ìœ ì§€/ì¢…ë£Œ
```
ê°™ì€ í„´ â†’ ë°°ì¹­ ìœ ì§€
ë‹¤ìŒ ë§¤í¬ë¡œíƒœìŠ¤í¬ â†’ ë°°ì¹­ ì¢…ë£Œ
```

### setState ê·œì¹™
```
ì´ì „ ìƒíƒœ ì‚¬ìš© â†’ í•¨ìˆ˜í˜•
ê°’ ë®ì–´ì“°ê¸° â†’ ê°’ ë°©ì‹
```

---

## 13. ìµœì¢… í•œ ë¬¸ì¥ ìš”ì•½

> Reactì—ì„œ setStateëŠ” ì¦‰ì‹œ ìƒíƒœë¥¼ ë°”ê¾¸ì§€ ì•Šê³  ì—…ë°ì´íŠ¸ íì— ìŒ“ì´ë©°,  
> ì½œìŠ¤íƒê³¼ ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ê°€ ëª¨ë‘ ëë‚œ ì‹œì ì— ë°°ì¹­ì„ ì¢…ë£Œí•˜ê³   
> í•œ ë²ˆì˜ ë Œë”ë§ìœ¼ë¡œ ìƒíƒœë¥¼ ë°˜ì˜í•œë‹¤.
