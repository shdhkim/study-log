# React / JavaScript 핵심 문법 정리 

> React 기준으로 자주 쓰는 JS 문법 + lodash(_.시리즈) 핵심 정리  
> 상태 불변성, 렌더링 패턴, 실무에서 바로 쓰는 코드 위주

---

## 1. 구조 분해 할당 (Destructuring)

### 1-1. 배열 구조 분해
```js
const arr = [10, 20, 30];

const [a, b] = arr;          // a=10, b=20
const [x, , z] = arr;        // x=10, z=30
const [p, q = 999] = [1];    // q 기본값

const [head, ...tail] = [1,2,3,4];
```

### 1-2. 객체 구조 분해
```js
const user = { id: 1, name: "kim", age: 26 };

const { id, name } = user;
const { name: username } = user;
const { phone = "없음" } = user;

const obj = { profile: { email: "a@b.com" } };
const { profile: { email } } = obj;
```

### 1-3. 함수 파라미터 구조 분해 (React)
```js
function Card({ title, onClick, items = [] }) {}
```

---

## 2. Spread / Rest

### 2-1. Spread (불변 업데이트)
```js
const merged = [...a, ...b];
const mergedObj = { ...obj1, ...obj2 };
```

### 2-2. Rest
```js
const [first, ...rest] = [1,2,3];

function f(...args) {}
```

---

## 3. Optional Chaining / Nullish Coalescing

```js
const name = user?.profile?.name;
const pageSize = props.pageSize ?? 20;
```

---

## 4. Array 문법 (React 핵심)

### 4-1. push / pop / shift / unshift (⚠️ 원본 변경)
```js
const arr = [1,2,3];

arr.push(4);      // [1,2,3,4]
arr.pop();        // [1,2]
arr.unshift(0);   // [0,1,2]
arr.shift();      // [1,2]
```

❌ React 상태에서 직접 사용 금지
```js
state.push(item); // ❌
```

### 4-2. push 대체 패턴 (불변)
```js
setItems(prev => [...prev, item]);
setItems(prev => [item, ...prev]);
```

### 4-3. map / filter / find
```js
items.map(x => x * 2);
items.filter(x => x.id !== id);
items.find(x => x.id === id);
```

### 4-4. reduce
```js
items.reduce((acc, cur) => acc + cur, 0);
```

### 4-5. sort (주의)
```js
[...items].sort((a,b) => a.price - b.price);
```

---

## 5. Object 문법 (불변)

```js
setUser(prev => ({ ...prev, name: "new" }));

setUser(prev => ({
  ...prev,
  profile: { ...prev.profile, email: "x@y.com" }
}));
```

---

## 6. 조건부 렌더링

```jsx
{isLoading ? <Spinner /> : <List />}
{items.length > 0 && <List />}
{error && <ErrorBox />}
```

---

## 7. 이벤트 핸들러

```jsx
<button onClick={() => handleRemove(id)}>삭제</button>
```

---

## 8. 비동기 처리

```js
async function load() {
  try {
    const res = await fetch("/api/items");
    setItems(await res.json());
  } catch (e) {}
}
```

---

## 9. lodash (_. 시리즈)

```js
import _ from "lodash";
```

### _.debounce
```js
_.debounce(fn, 300);
```

### _.uniqBy
```js
_.uniqBy(items, "id");
```

### _.groupBy
```js
_.groupBy(items, "category");
```

### _.orderBy
```js
_.orderBy(items, ["price"], ["asc"]);
```

### _.isEqual
```js
_.isEqual(a, b);
```

### _.cloneDeep
```js
_.cloneDeep(obj);
```

---

## 10. React 불변 업데이트 요약

### 배열
```js
setList(prev => [...prev, item]);
setList(prev => prev.filter(x => x.id !== id));
setList(prev => prev.map(x => x.id === id ? { ...x, done: true } : x));
```

### 객체
```js
setState(prev => ({
  ...prev,
  nested: { ...prev.nested, v: 1 }
}));
```

---

## 핵심 요약

- push/pop은 **원본 변경**
- React에서는 spread/map/filter로 대체
- 깊은 비교는 _.isEqual
