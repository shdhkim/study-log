# React · HTML · DOM · Virtual DOM 관계 정리 

## 1. 전체 구조 한 줄 요약

HTML은 시작 재료이고,
브라우저가 HTML을 파싱해 DOM을 만들며,
index.js가 그 DOM 중 일부(root)를 잡아 React에게 넘기고,
React는 Virtual DOM을 이용해 그 영역을 관리한다.

---

## 2. HTML의 역할

HTML은 단순한 텍스트 문서다.

```html
<body>
  <div id="root"></div>
</body>
```

HTML이 하는 일은 딱 하나다.

- 브라우저에게 “이런 구조로 DOM을 만들어라”고 알려준다

HTML 자체는:
- 로직 없음
- 상태 없음
- 동적 변경 능력 없음

HTML은 DOM이 만들어지는 순간 역할이 끝난다.

---

## 3. DOM이란 무엇인가

DOM(Document Object Model)은
브라우저가 HTML을 파싱해서 만든 객체 트리다.

HTML:
```html
<div>
  <p>Hello</p>
</div>
```

브라우저 내부 DOM 구조:
```
Document
 └─ html
     └─ body
         └─ div
             └─ p
                 └─ "Hello"
```

DOM의 특징:
- 브라우저가 소유
- 실제 화면과 연결
- 수정 시 레이아웃/페인트 발생

---

## 4. JavaScript는 DOM을 어떻게 접근하는가

JavaScript는 DOM을 직접 소유하지 않는다.
브라우저가 제공한 Web API를 통해 접근한다.

```js
document.getElementById("root");
```

이 코드는:
- HTML을 읽는 것이 아님
- 이미 생성된 DOM 노드의 참조를 요청하는 것

JavaScript의 역할:
- DOM 변경을 요청
- 실제 변경과 화면 갱신은 브라우저가 수행

---

## 5. index.js의 정확한 역할

React 앱에서 실제 DOM에 접근하는 유일한 공식 지점이 index.js다.

```js
const rootEl = document.getElementById("root");
ReactDOM.createRoot(rootEl).render(<App />);
```

이 코드를 말로 풀면:

- 브라우저에게 root DOM을 하나 요청한다
- 그 DOM 영역을 React에게 관리 권한으로 넘긴다

이 이후:
- root 내부 DOM은 React가 관리
- 개발자는 직접 DOM 조작을 하지 않는다

---

## 6. React는 DOM을 직접 만들까?

아니다.

React는:
- DOM을 만들지 않는다
- DOM을 직접 비교하지 않는다

React가 만드는 것은 Virtual DOM이다.

---

## 7. Virtual DOM이란 무엇인가

Virtual DOM은 실제 DOM의 복사본이 아니라,
React가 메모리에 만든 JS 객체 트리다.

```jsx
<h1>Hello</h1>
```

React 내부 표현:
```js
{
  type: "h1",
  props: {
    children: "Hello"
  }
}
```

이 객체는:
- 화면 아님
- DOM 아님
- 브라우저와 직접 연결되지 않음

---

## 8. 상태 변경 시 실제 흐름 예시

### 예제 컴포넌트

```jsx
function App() {
  const [text, setText] = useState("Hello");

  return (
    <>
      <h1>{text}</h1>
      <button onClick={() => setText("Hello React")}>
        change
      </button>
    </>
  );
}
```

### 버튼 클릭 시 내부 흐름

1. setText 호출
2. App 함수 재실행
3. 새로운 JSX 반환
4. 새로운 Virtual DOM 생성
5. 이전 Virtual DOM과 비교
6. 변경된 부분만 실제 DOM에 반영

실제 DOM 수정:
- h1 태그 유지
- 텍스트 노드만 변경

---

## 9. Virtual DOM 비교 대상은 무엇인가

React는 다음을 비교한다.

- 이전 Virtual DOM (JS 객체)
- 새로운 Virtual DOM (JS 객체)

비교 대상이 아닌 것:
- 실제 DOM
- JS 코드 문자열
- HTML 파일

---

## 10. 왜 Virtual DOM이 필요한가

실제 DOM을 직접 관리하려면 개발자가 매번 판단해야 한다.

- 어떤 노드를 바꿀지
- 지울지
- 추가할지
- 순서가 바뀌었는지

Virtual DOM은 이 판단을 자동화한다.

핵심 가치는 성능이 아니라 안정성과 유지보수성이다.

---

## 11. 구성 요소 역할 정리

| 구성 요소 | 역할 |
|---|---|
| HTML | DOM 생성 재료 |
| DOM | 실제 화면 구조 |
| JavaScript | DOM 접근 도구 |
| index.js | React와 DOM 연결 |
| React | 변경 계산 관리자 |
| Virtual DOM | 변경 비교 대상 |

---

## 12. 전체 흐름 요약

1. 브라우저가 index.html 로드
2. HTML 파싱 → DOM 생성
3. index.js 실행
4. root DOM을 React에 위임
5. React가 Virtual DOM 생성
6. 상태 변경 시 Virtual DOM 비교
7. 실제 DOM 최소 수정

---

## 13. 핵심 문장 정리

- HTML은 DOM을 만드는 재료다
- DOM은 브라우저가 소유한다
- index.js에서 React가 DOM과 연결된다
- React는 Virtual DOM으로 변경을 계산한다
- 실제 화면 수정은 항상 브라우저가 한다
