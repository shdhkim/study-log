# Oracle TM 락 모드 정리 (RS / RX / S / SRX / X)
작성 기준: Oracle Database

---

## 1. 전제

여기서는 **Oracle 테이블 락(TM, Table Lock)** 의 주요 모드인  
**RS / RX / S / SRX / X** 를 정리한다.

목표:
- 각 모드가 **무엇을 허용하고 무엇을 막는지**
- **서로 충돌하는지 / 공존하는지**
- 실무에서 **언제 등장하는지**
를 직관적으로 이해하는 것

※ 실제 데이터 충돌 제어는 **TX(행 락)** 이 담당하며  
TM 락은 **테이블 수준에서의 충돌 가능성 관리**를 위한 락이다.

---

## 2. TM 락 모드 한 줄 요약

| 모드 | 한 줄 요약 |
|---|---|
| RS | 행 락을 걸 예정임을 선언 |
| RX | DML 공존, DDL 차단 |
| S | 다른 세션의 DML 차단 |
| SRX | 내가 쓰고, 남은 못 씀 |
| X | 테이블 완전 독점 |

---

## 3. TM(RS) – Row Share Mode

### 의미
- **행 단위 락(TX)을 걸 예정임을 테이블에 선언**
- 가장 약한 테이블 락

### 허용 / 차단 (다른 세션 기준)

| 작업 | 가능 여부 |
|---|---|
| SELECT | 가능 |
| INSERT | 가능 |
| UPDATE | 가능 |
| DELETE | 가능 |
| DDL | 불가 |

### 대표 상황
```sql
SELECT ... FOR UPDATE;
```

---

## 4. TM(RX) – Row Exclusive Mode

### 의미
- **테이블은 공유**
- **행 단위로 충돌 제어**

### 허용 / 차단

| 작업 | 가능 여부 |
|---|---|
| SELECT | 가능 |
| INSERT | 가능 |
| UPDATE | 가능 |
| DELETE | 가능 |
| DDL | 불가 |

### 대표 상황
```sql
INSERT
UPDATE
DELETE
```

---

## 5. TM(S) – Share Mode

### 의미
- **다른 세션의 DML을 차단**
- 테이블을 논리적으로 보호

### 허용 / 차단 (다른 세션 기준)

| 작업 | 가능 여부 |
|---|---|
| SELECT | 가능 |
| INSERT | 불가 |
| UPDATE | 불가 |
| DELETE | 불가 |
| DDL | 불가 |

---

## 6. TM(SRX) – Share Row Exclusive Mode

### 의미
- **락 보유 세션은 DML 가능**
- **다른 세션의 DML을 강하게 차단**

### 허용 / 차단 (다른 세션 기준)

| 작업 | 가능 여부 |
|---|---|
| SELECT | 가능 |
| INSERT | 불가 |
| UPDATE | 불가 |
| DELETE | 불가 |
| DDL | 불가 |

---

## 7. TM(X) – Exclusive Mode

### 의미
- 테이블을 **완전히 혼자 사용**
- 다른 어떤 TM 락도 공존 불가

---

## 8. TM 락 모드 호환성

| 보유 \ 요청 | RS | RX | S | SRX | X |
|---|---|---|---|---|---|
| RS | 가능 | 가능 | 가능 | 불가 | 불가 |
| RX | 가능 | 가능 | 불가 | 불가 | 불가 |
| S  | 가능 | 불가 | 가능 | 불가 | 불가 |
| SRX| 불가 | 불가 | 불가 | 불가 | 불가 |
| X  | 불가 | 불가 | 불가 | 불가 | 불가 |

---

## 9. 최종 요약

- RS : 행 락 예고
- RX : DML 기본 락
- S  : 다른 세션 DML 차단
- SRX: 내가 쓰고 남은 차단
- X  : 전부 차단
